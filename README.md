# TFS Notify bot

# О боте:
Бот для рассылки сообщений по списку из excel таблицы.


# Роли:
В боте есть 2 вида ролей:
* администраторы - пользователи с правами создания рассылок и просмотра подписанных пользователей на текущий момент
* пользователя - обычные пользователи, которые могут только подписаться на бота


## Сообщения
Все сообщения которые отправляет бот находятся в этом файле: [Messages.yaml](config/messages.yaml)
Так же там есть описание для каждого сообщения.

ВАЖНО: это лишь сообщения и к функциональности бота не имеют отношения.


## Команды администратора:
    /start - Регистрация пользователя в бд, для рассылки.
    /mail   - Создание рассылки по пользователям из файла, подробные шаги описаны ниже.
    /users  - Получение списка всех пользователей которые зарегистрированы в боте
    /admins - Удаление или добавление новых администраторов
    /help   - Сообщение с командами и кратким описанием

## Команды пользователя:
    /start - Регистрация пользователя в бд, для рассылки.
    /tours - Ближайшие туры и количество свободных мест
    /help - Возвращает сообщение с информацией о командах


#  Пошаговое описание работы рассылки:

## Основные пункты:
* Регистрация в боте
* Получение администратора
* Следование шагам по формированию рассылки и рассылка

### Регистрация в боте

Для того что бы бот запомнил вас, необходимо:
1. Написать боту сообщение `/start` (на данный момент бот под тегом @tfs_notify_bot)
2. После запоминания, необходимо нажать на кнопку поделиться номером телефона, что бы профиль был полностью закончен.

### Получение администратора

Для доступа к командам администратора, необходимо, 
что бы один из администраторов вам выдал права, он может сделать это:
1. Использовав команду `/admins`
2. Нажать на кнопку `Добавить администратора`
3. Ввести имя пользователя (username в telegram -> Пример: rabbit_666)
4. Complete!

### Следование шагам по формированию рассылки и рассылка

1. Использовать команду `/mail`
2. Пишем сообщение для рассылки для пользователей
3. Подтверждаем если все устраивает, если нет -> снова пишем
4. Загружаем файл в формате `.xlsx`
5. Выбираем название колонки в которой находятся номера телефонов (названия будут в виде кнопок)
6. Если все пользователи, подписаны на бот (или почти все) можно согласиться и отправить рассылку им, иначе отменить и ждать пока все подпишутся
7. Получить уведомления о том сколько сообщений дошло
